
{% extends 'internal/base_internal.html' %}

{% block title %}{{ super() }} | Solicitudes{% endblock title %}

{% block custom_css %}
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css">
{% endblock custom_css %}

{% block page_content %}
<style>
  h1{
  font-size: 40px;
  }
</style>
<div class="row border-bottom white-bg dashboard-header">
    <div class="col-md-6">
        <h2><strong>Creación de Solicitud: Selección de Cliente</strong></h2>
    </div>
</div>
<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
    <div class="col-md-12">
    <div class="text-right">
      <a  href="{{ url('internal:servicerequest.create_client')}}" id="createButton" class="btn btn-primary pull-right">
        <i class="fa fa-plus"></i>
        Crear nuevo cliente
      </a>
    </div>
  </div>
  </div>
</div>
<div class="wrapper wrapper-content animated fadeInRight main-wrapper-content">
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-content">

          <div class="table-responsive">

                    {# <input type="text"  class="input-sm form-control" placeholder="Buscar nombre" id="text_search" onkeyup="text_search_function()">
                    <button type="button" class="btn btn-primary btn-sm"  style="margin-bottom:0px !important;" onclick="text_search_function()"> Buscar</button> #}

                        <table class="table table-striped table-bordered" id="client-table">
                            <thead>
                            <tr>
                                <th>Nombre </th>
                                <th>Número de Documento </th>
                                <th>Crear Solicitud</th>
                            </tr>
                            </thead>
                            <tbody>
                              {% for client in client_list %}
                                <tr>
                                  <td>{{ client.user.get_full_name() or client.user.username }}</td>
                                  <td>{{ client.doc_number }}</td>
                                  <td>
                                    <a href="{{ url('internal:servicerequest.create', client.pk)}}">
                                      <i class="fa fa-pencil-square-o" ></i>
                                    </a>
                                  </td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>

             </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock page_content %}
{% block custom_js %}
<script>
      function text_search_function() {

        var boxes = document.getElementsByClassName('i-checks');
        for (var i = 0; i < boxes.length;i++)
        {
            box = boxes[i];
            box.checked = false;
        }

        var input, filter, table, tr, td, i;
        input = document.getElementById("text_search");
        filter = input.value.toUpperCase();
        table = document.getElementById("mytable");
        tr = table.getElementsByTagName("tr");
        for (i = 0; i < tr.length; i++) {
          td = tr[i].getElementsByTagName("td")[0];
          if (td) {
            if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                tr[i].style.display = "";
            } else {
                tr[i].style.display = "none";
            }
          }
        }
      }
</script>

    <script>

        var fill_Toastr = function(pMsg, pTypeMsg,pTitle){
            toastr.options = {
              closeButton: true,
              progressBar: true,
              showMethod: 'slideDown',
              positionClass: "toast-bottom-right",
              timeOut: 4000
              };

              switch(pTypeMsg){
                case "success":
                toastr.success(pMsg, '',pTitle);
                break;

                case "error":
                toastr.error(pMsg, '',pTitle);
                break;
              }
        }
        function list_filter_function() {
            var boxes = document.getElementsByClassName('i-checks');
            for (var i = 0; i < boxes.length;i++)
            {
              box = boxes[i];
              box.checked = false;
            }

          var input, filter, table, tr, td, i;
          input = document.getElementById("typeList");
          filter = input[input.selectedIndex].value;
          table = document.getElementById("mytable");
          tr = table.getElementsByTagName("tr");
          if (input.selectedIndex > -1)
          {
            if(filter == "-- Todos --")
            {
              for (i = 0; i < tr.length; i++) {
                tr[i].style.display = "";
              }
            }
            else
            {
              filter = filter.toUpperCase();
              for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[2];
                if (td) {
                  if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                      tr[i].style.display = "";
                  } else {
                      tr[i].style.display = "none";
                  }
                }
              }
            }
          }
        }
    </script>
<script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
<script src="{{ static('js/datatable-config.js') }}"></script>
<script>
if ($('.message-container .messages li')) {
  var msg = $('.message-container .messages li').first();
  $.extend(toastr.options, {"positionClass": "toast-bottom-right",});
  try {
    toastr[msg.data('tags')](msg.text());
  } catch (TypeError) {}
}
$('#client-table').DataTable({
  responsive: true,
});
</script>

{% endblock custom_js %}

